(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{FkIy:function(t,e,a){"use strict";var o=a("lLJF"),n=a.n(o);n.a},TIMg:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page-container",{staticStyle:{padding:"10px"}},[a("div",{staticClass:"container"},[a("q-btn",{staticClass:"fixed",staticStyle:{right:"18px",bottom:"18px",width:"50px",height:"50px","z-index":"1000"},attrs:{round:"",color:"primary",icon:"add"},on:{click:function(e){t.novo=!t.novo}}}),a("q-breadcrumbs",{attrs:{separator:"/","active-color":"secondary",color:"light"}},[a("q-breadcrumbs-el",{attrs:{label:"Home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Eventos",to:"/painel"}}),a("q-breadcrumbs-el",{attrs:{label:"Cupons"}})],1),a("q-card",[a("q-card-title",[t._v("\n          "+t._s(t.evento.descricao)+"\n        ")]),a("q-card-separator")],1),t.novo?a("cupom-form",{attrs:{evento:t.evento},on:{"get-cupons":t.listar_cupons,cancelar:function(e){t.novo=!1}}}):a("q-table",{attrs:{title:"Lista de cupons",data:t.cupons,columns:t.columns,"row-key":"name"},scopedSlots:t._u([{key:"top-right",fn:function(e){return[a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"secondary",flat:"",label:"Listagem de Eventos"},on:{click:function(e){t.$router.push("/painel")}}})]}},{key:"top-selection",fn:function(e){return[a("q-btn",{attrs:{color:"secondary",flat:"",label:"Action 2"}}),a("div",{staticClass:"col"}),a("q-btn",{attrs:{color:"negative",flat:"",round:"",delete:"",icon:"delete"},on:{click:t.deleteRow}})]}},{key:"body-cell-dataValidade",fn:function(e){return a("q-td",{attrs:{props:e}},[t._v("\n          "+t._s(t.onDateFormat(e.row.dataValidade))+"\n          ")])}},{key:"body-cell-Utilizado",fn:function(e){return a("q-td",{attrs:{props:e}},[e.row.utilizado?a("q-chip",{attrs:{tag:"",color:"red","icon-right":"close"}},[t._v("\n            Utilizado\n          ")]):a("q-chip",{attrs:{tag:"",color:"secondary","icon-right":"check"}},[t._v("\n            Disponível\n          ")])],1)}},{key:"body-cell-id",fn:function(e){return a("q-td",{attrs:{props:e}},[a("q-btn-dropdown",{attrs:{push:"",color:"blue-7",dense:"",icon:"share"}},[a("q-list",{attrs:{link:""}},[a("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}]},[a("q-item-side",{attrs:{icon:"share",inverted:"",color:"blue"}}),a("q-item-main",[a("q-item-tile",{attrs:{label:""}},[t._v("Facebook")])],1)],1),a("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}]},[a("q-item-side",{attrs:{icon:"share",inverted:"",color:"blue"}}),a("q-item-main",[a("q-item-tile",{attrs:{label:""}},[t._v("Google")])],1)],1),a("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}]},[a("q-item-side",{attrs:{icon:"share",inverted:"",color:"blue"}}),a("q-item-main",[a("q-item-tile",{attrs:{label:""}},[t._v("Whatsapp")])],1)],1)],1)],1),t._v(" \n        ")],1)}}])})],1)])},n=[];o._withStripped=!0;var i=a("MVZn"),s=a.n(i),r=a("L2JU"),l=a("4IOb"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col s12"},[a("q-card",{staticStyle:{width:"100%"},attrs:{inline:""}},[a("q-card-title",[t._v("\n        Cadastro Cupom\n        "),a("div",{staticClass:"row items-center",attrs:{slot:"right"},slot:"right"},[a("q-icon",{attrs:{name:"calendar"}})],1)]),a("q-card-main",[a("q-field",{attrs:{icon:"",helper:""}},[a("q-input",{attrs:{"float-label":"Descrição"},model:{value:t.cupom.nome,callback:function(e){t.$set(t.cupom,"nome",e)},expression:"cupom.nome"}})],1),a("br"),a("q-datetime",{attrs:{format:"DD/MM/YYYY",min:t.hoje,"float-label":"Data de Validade",type:"date"},model:{value:t.cupom.dataValidade,callback:function(e){t.$set(t.cupom,"dataValidade",e)},expression:"cupom.dataValidade"}}),a("br"),a("q-input",{attrs:{type:"number",suffix:"%","max-lenght":"3",placeholder:"10","stack-label":"Desconto"},model:{value:t.cupom.desconto,callback:function(e){t.$set(t.cupom,"desconto",e)},expression:"cupom.desconto"}}),a("br"),a("q-input",{attrs:{type:"number","stack-label":"Quantidade"},model:{value:t.quantidade,callback:function(e){t.quantidade=e},expression:"quantidade"}}),a("br")],1),a("q-card-separator"),a("q-card-actions",[a("q-btn",{attrs:{color:"secondary",label:"Gerar Cupons"},on:{click:t.gerar_cupom}}),a("q-btn",{attrs:{color:"orange",label:"Voltar"},on:{click:t.onCancel}})],1)],1)],1)])},d=[];c._withStripped=!0;var u={name:"cupom-form",props:["evento"],data:function(){return{cupom:{id:null,nome:"",dataValidade:"",evento:{id:null},desconto:0},quantidade:1,hoje:new Date}},watch:{quantidade:function(t,e){this.quantidade=parseInt(t),t<0&&(this.quantidade=1)}},created:function(){null==this.evento&&this.$router.push("/painel"),this.cupom.evento.id=this.evento.id,this.cupom.dataValidade=this.$moment.prepareDate(this.evento.dataInicio)},methods:{gerar_cupom:function(){var t=this;console.log(this.cupom.nome),this.$http.post("/cupom/cadastrar/"+this.quantidade,{headers:{"Content-Type":"application/json;charset=UTF-8"},id:null,descricao:this.cupom.nome,dataValidade:this.$moment.prepareDateReverse(this.cupom.dataValidade),desconto:this.cupom.desconto/100,evento:this.cupom.evento}).then(function(e){if("success"==e.data.result.status)t.$q.notify({message:t.quantidade+" cupom gerados com sucesso",timeout:3e3,type:"positive",color:"positive",textColor:"white",icon:"check"}),t.$emit("get-cupons");else{var a=e.data.result.response.erros;a.length>0&&t.$q.notify({message:a[0].defaultMessage,timeout:3e3,type:"negative",color:"red",textColor:"white",icon:"error"})}}).catch(function(t){console.log(t)})},onCancel:function(){this.$emit("cancelar")}}},p=u,m=(a("FkIy"),a("KHd+")),h=Object(m["a"])(p,c,d,!1,null,"2d58bb2a",null),v=h.exports,f={name:"atividade-evento",components:{CupomForm:v},data:function(){return{evento:{descricao:""},cupons:[],novo:!1,columns:[{name:"desc",required:!0,label:"Descrição",align:"left",field:"descricao",sortable:!0},{name:"desconto",label:"Desconto",align:"left",field:"desconto",sortable:!0},{name:"codigo",label:"Código",align:"left",field:"codigo",sortable:!0},{name:"dataValidade",label:"Validade",align:"left",field:"dataValidade",sortable:!0},{name:"Utilizado",label:"Utilizado",align:"left",field:"utilizado",sortable:!0},{name:"id",label:"Ações",align:"left",field:"id"}]}},computed:s()({},Object(r["b"])("evento",["getEventoSelecionado"])),created:function(){this.evento=this.$store.state.evento.eventoSelecionado,null==this.evento&&this.$router.push("/painel"),this.listar_cupons()},methods:{listar_cupons:function(){var t=this;this.$http.get("/cupom/"+this.evento.id+"/cupons",{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){t.cupons=e.data}).catch(function(t){console.log(t)})},gerar_cupom:function(t){this.novo=!0},onDateFormat:function(t){return l["Ha"].formatDate(new Date(this.$moment.prepareDate(t)),"DD/MM/YYYY")},onHoursFormat:function(t){return l["Ha"].formatDate(new Date(t),"HH:mm")}}},b=f,q=(a("YcI2"),Object(m["a"])(b,o,n,!1,null,"8766dfb8",null));e["default"]=q.exports},YcI2:function(t,e,a){"use strict";var o=a("lkBA"),n=a.n(o);n.a},lLJF:function(t,e,a){},lkBA:function(t,e,a){}}]);