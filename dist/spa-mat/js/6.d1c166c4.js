(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{CNgS:function(t,e,a){"use strict";var i=a("GI50"),o=a.n(i);o.a},GI50:function(t,e,a){},SotC:function(t,e,a){"use strict";var i=a("ZekS"),o=a.n(i);o.a},ZekS:function(t,e,a){},ty1k:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page-container",{staticStyle:{padding:"10px"}},[a("div",{staticClass:"container"},[a("q-btn",{staticClass:"fixed",staticStyle:{right:"18px",bottom:"18px",width:"50px",height:"50px","z-index":"1000"},attrs:{round:"",color:"primary",icon:"add"},on:{click:function(e){t.novo=!t.novo,t.atividade=null}}}),a("q-breadcrumbs",{attrs:{separator:"/","active-color":"secondary",color:"light"}},[a("q-breadcrumbs-el",{attrs:{label:"Home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Eventos",to:"/painel"}}),a("q-breadcrumbs-el",{attrs:{label:"Atividades"}})],1),a("q-card",[a("q-card-title",[t._v("\n          "+t._s(t.evento.descricao)+"\n        ")]),a("q-card-separator")],1),t.novo?a("atividade-form",{attrs:{evento:t.evento,atividadebind:t.atividade},on:{"get-atividades":t.onLoad,cancelar:function(e){t.novo=!1}}}):a("q-table",{attrs:{title:"Lista das atividades",data:t.atividades,columns:t.columns,"row-key":"name"},scopedSlots:t._u([{key:"top-right",fn:function(e){return[a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"secondary",flat:"",label:"Listagem de Eventos"},on:{click:function(e){t.$router.push("/painel")}}})]}},{key:"top-selection",fn:function(e){return[a("q-btn",{attrs:{color:"secondary",flat:"",label:"Action 2"}}),a("div",{staticClass:"col"}),a("q-btn",{attrs:{color:"negative",flat:"",round:"",delete:"",icon:"delete"},on:{click:t.deleteRow}})]}},{key:"body-cell-dataTermino",fn:function(e){return a("q-td",{attrs:{props:e}},[t._v("\n          "+t._s(t.onDateFormat(e.row.termino))+"\n          ")])}},{key:"body-cell-dataInicio",fn:function(e){return a("q-td",{attrs:{props:e}},[t._v("\n          "+t._s(t.onDateFormat(e.row.inicio))+"\n          ")])}},{key:"body-cell-HoraInicio",fn:function(e){return a("q-td",{attrs:{props:e}},[t._v("\n            "+t._s(t.onHoursFormat(e.row.inicio))+"\n          ")])}},{key:"body-cell-HoraTermino",fn:function(e){return a("q-td",{attrs:{props:e}},[t._v("\n            "+t._s(t.onHoursFormat(e.row.termino))+"\n          ")])}},{key:"body-cell-id",fn:function(e){return a("q-td",{attrs:{props:e}},[a("q-btn",{attrs:{push:"",color:"blue-14",dense:"",icon:"edit"},on:{click:function(a){t.onEdit(e.row)}}}),t._v(" \n          "),a("q-btn",{attrs:{push:"",color:"red-14",dense:"",icon:"remove"},on:{click:function(t){}}})],1)}}])})],1)])},o=[];i._withStripped=!0;var n=a("MVZn"),r=a.n(n),d=a("L2JU"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col s12"},[a("q-card",{staticStyle:{width:"100%"},attrs:{inline:""}},[a("q-card-title",[t._v("\n        Cadastro Atividade\n        "),a("div",{staticClass:"row items-center",attrs:{slot:"right"},slot:"right"},[a("q-icon",{attrs:{name:"calendar"}})],1)]),a("q-card-main",[a("q-field",{attrs:{icon:"",helper:""}},[a("q-input",{attrs:{"float-label":"Descrição"},model:{value:t.atividade.nome,callback:function(e){t.$set(t.atividade,"nome",e)},expression:"atividade.nome"}})],1),a("br"),a("q-datetime",{attrs:{format:"DD/MM/YYYY HH:mm",min:t.hoje,"float-label":"Data de início",type:"datetime"},model:{value:t.atividade.inicio,callback:function(e){t.$set(t.atividade,"inicio",e)},expression:"atividade.inicio"}}),a("br"),a("q-datetime",{attrs:{format:"DD/MM/YYYY HH:mm",min:t.hoje,"float-label":"Data de término",type:"datetime"},model:{value:t.atividade.termino,callback:function(e){t.$set(t.atividade,"termino",e)},expression:"atividade.termino"}}),a("br"),a("q-input",{attrs:{type:"number",prefix:"R$","stack-label":"Valor"},model:{value:t.atividade.valor,callback:function(e){t.$set(t.atividade,"valor",e)},expression:"atividade.valor"}}),a("br"),a("q-select",{attrs:{"float-label":"Tipo Atividade",options:t.selectOptions},model:{value:t.atividade.tipoAtividade.id,callback:function(e){t.$set(t.atividade.tipoAtividade,"id",e)},expression:"atividade.tipoAtividade.id"}})],1),a("q-card-separator"),a("q-card-actions",[a("q-btn",{attrs:{color:"secondary",label:"Salvar"},on:{click:t.salvarAtividade}}),a("q-btn",{attrs:{color:"orange",label:"Voltar"},on:{click:t.onCancel}})],1)],1)],1)])},s=[];l._withStripped=!0;var c=a("4IOb"),v={name:"atividade-form",props:["evento","atividadebind"],data:function(){return{atividade:{id:null,nome:"",inicio:"",termino:"",tipoAtividade:{id:null},valor:null},selectOptions:[],hoje:new Date}},created:function(){null!=this.atividadebind&&(this.atividade=this.atividadebind),this.onTipoAtividade()},methods:{onTipoAtividade:function(){var t=this;this.$http.get("/atividade/listar-tipos",{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){t.selectOptions=e.data.map(function(t){return Object.defineProperty(t,"value",{value:t.id,writable:!0,enumerable:!0,configurable:!0}),Object.defineProperty(t,"label",{value:t.nome,writable:!0,enumerable:!0,configurable:!0}),t})})},salvarAtividade:function(){var t=this;this.$http.post("/atividade/cadastrar",{headers:{"Content-Type":"application/json;charset=UTF-8"},id:this.atividade.id,nome:this.atividade.nome,inicio:c["Ga"].formatDate(new Date(this.atividade.inicio),"YYYY-MM-DD HH:mm:ss"),termino:c["Ga"].formatDate(new Date(this.atividade.termino),"YYYY-MM-DD HH:mm:ss"),tipoAtividade:this.atividade.tipoAtividade,valor:this.atividade.valor,evento:{id:this.evento.id}}).then(function(e){if("success"==e.data.result.status)t.$q.notify({message:"Atividade salva com sucesso",timeout:3e3,type:"positive",color:"positive",textColor:"white",icon:"check"}),t.$emit("get-atividades");else{var a=e.data.result.response.erros;a.length>0&&t.$q.notify({message:a[0].defaultMessage,timeout:3e3,type:"negative",color:"red",textColor:"white",icon:"error"})}}).catch(function(t){console.log(t)})},onCancel:function(){this.$emit("cancelar")}}},u=v,m=(a("SotC"),a("KHd+")),p=Object(m["a"])(u,l,s,!1,null,"4a085c30",null),f=p.exports,b={name:"atividade-evento",components:{AtividadeForm:f},data:function(){return{evento:{descricao:""},atividades:[],atividade:null,novo:!1,columns:[{name:"desc",required:!0,label:"Descrição",align:"left",field:"nome",sortable:!0},{name:"dataInicio",label:"Data Início",align:"left",field:"inicio",sortable:!0},{name:"HoraInicio",label:"Hora Início",align:"left",field:"inicio",sortable:!0},{name:"dataTermino",label:"Data Término",align:"left",field:"termino",sortable:!0},{name:"HoraTermino",label:"Hora Término",align:"left",field:"termino",sortable:!0},{name:"valor",label:"Valor R$",align:"right",field:"valor"},{name:"id",label:"Ações",align:"left",field:"id"}]}},computed:r()({},Object(d["b"])("evento",["getEventoSelecionado"])),created:function(){this.evento=this.$store.state.evento.eventoSelecionado,null==this.evento&&this.$router.push("/painel"),this.atividades=this.evento.atividades},methods:{onLoad:function(){},onEdit:function(t){console.log(t),this.atividade=t,this.novo=!0},onDateFormat:function(t){return c["Ga"].formatDate(new Date(this.$moment.prepareDate(t)),"DD/MM/YYYY")},onHoursFormat:function(t){return c["Ga"].formatDate(new Date(t),"HH:mm")}}},h=b,q=(a("CNgS"),Object(m["a"])(h,i,o,!1,null,"6d6c7267",null));e["default"]=q.exports}}]);